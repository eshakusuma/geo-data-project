<!DOCTYPE html>
<html>
  <head>
    <title>University Map</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="https://openlayers.org/en/latest/css/ol.css" />
    <style>
      html, body {
        margin: 0;
        padding: 0;
        font-family: sans-serif;
      }
      #map {
        height: 80vh;
        width: 100%;
      }
      #controls {
        padding: 10px;
      }
      #controls input {
        margin: 4px;
        padding: 5px;
      }
      button {
        margin: 4px;
        padding: 5px 10px;
        font-size: 14px;
      }
    </style>
  </head>
  <body>
    <h2 style="margin: 10px;">University Map</h2>
    
    <div id="controls">
      <button onclick="resetMap()">Reset View</button>
      <button onclick="zoomIn()">Zoom In</button>
      <button onclick="zoomOut()">Zoom Out</button>
      <button onclick="toggleLabels()">Toggle Labels</button><br>

      <input type="text" id="name" placeholder="University Name">
      <input type="text" id="lat" placeholder="Latitude">
      <input type="text" id="lon" placeholder="Longitude">
      <button onclick="addUniversity()">Add University</button>
    </div>

    <div id="map"></div>
    
    <script src="https://openlayers.org/en/latest/build/ol.js"></script>
    <script src="where.js"></script>
    <script>
      const features = myData.map(([lat, lon, name]) => {
        const feature = new ol.Feature({
          geometry: new ol.geom.Point(ol.proj.fromLonLat([lon, lat])),
          name: name
        });

        feature.setStyle(new ol.style.Style({
          image: new ol.style.Icon({
            anchor: [0.5, 1],
            src: "https://cdn.mapmarker.io/api/v1/font-awesome/v5/pin?icon=fa-university&size=40"
          })
        }));

        return feature;
      });

      const vectorSource = new ol.source.Vector({
        features: features
      });

      const vectorLayer = new ol.layer.Vector({
        source: vectorSource
      });

      const map = new ol.Map({
        target: 'map',
        layers: [
          new ol.layer.Tile({
            source: new ol.source.OSM()
          }),
          vectorLayer
        ],
        view: new ol.View({
          center: ol.proj.fromLonLat([19.0, 52.0]),
          zoom: 5
        })
      });

      function addUniversity() {
        const name = document.getElementById('name').value;
        const lat = parseFloat(document.getElementById('lat').value);
        const lon = parseFloat(document.getElementById('lon').value);

        if (!name || isNaN(lat) || isNaN(lon)) {
          alert("Please enter valid university name, latitude, and longitude.");
          return;
        }

        const feature = new ol.Feature({
          geometry: new ol.geom.Point(ol.proj.fromLonLat([lon, lat])),
          name: name
        });

        feature.setStyle(new ol.style.Style({
          image: new ol.style.Icon({
            anchor: [0.5, 1],
            src: "https://cdn.mapmarker.io/api/v1/font-awesome/v5/pin?icon=fa-university&size=40"
          })
        }));

        vectorSource.addFeature(feature);
        map.getView().animate({ center: ol.proj.fromLonLat([lon, lat]), zoom: 8 });
      }
    </script>
  </body>
</html>
